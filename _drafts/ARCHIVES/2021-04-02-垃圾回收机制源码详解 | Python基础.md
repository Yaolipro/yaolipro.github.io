---
layout: post
title: 垃圾回收机制源码详解 | Python基础
category: ARCHIVES
description: 描述
tags: Python
---



python是如何进行内存管理的参考文章
引用计数
Python内部使用引用计数，来保持追踪内存中的对象，Python内部记录了对象有多少个引用，就是引用计数，当对象被创建时就创建了一个引用计数，当对象不再需要的时候，这个对象的引用计数为0时，他被垃圾回收。
垃圾回收
当内存中有不再使用的部分时，垃圾收集器就会把他们清理掉。他会去检查那些引用计数为0的对象，然后清除其在内存中的空间。当然除了引用计数为0的会被清除，还有一种情况也会被垃圾收集器清掉，当两个对象相互引用时，他们本身其他引用已经为0了。
内存池机制
Python提供了对内存的垃圾收集机制，但是他将不用的内存放到内存池而不是反回给操作系统。
python的程序会内存泄漏吗？
会发生内存泄漏，在Python程序里，内存泄漏是由于一个长期持有的对象不断的往一个dict或者list对象里添加新的对象, 而又没有即时释放，就会导致这些对象占用的内存越来越多，从而造成内存泄漏。另外，对象的交叉引用也会造成内存无法释放的问题。
说说有没有什么方面阻止或者检测内存泄漏？
程序员管理好每个python对象的引用，尽量在不需要使用对象的时候，断开所有引用
尽量少通过循环引用组织数据，可以改用weakref做弱引用或者用id之类的句柄访问对象
通过gc模块的接口可以检查出每次垃圾回收有哪些对象不能自动处理，再逐个逐个处理

## 附录

* https://www.jianshu.com/p/2b683cb5837c
* https://blog.csdn.net/u010967872/article/details/80301633